# Reflect PWA V2 - Enhanced Edition ğŸš€

## ğŸ‰ What's New in V2

Your Reflect app just got a MAJOR upgrade! V2 includes all the original features PLUS:

### âœ¨ New Features

#### 1. ğŸ¤ **Voice Input & Output**
- **Voice-to-text** for chat messages
- **Voice mood logging** - speak your feelings
- **Voice journaling** - dictate your thoughts
- **Text-to-speech** - AI responses read aloud
- Hands-free operation throughout the app

#### 2. ğŸ“Š **Mood Analytics Dashboard**
- Visual mood trends over time
- 7-day and 30-day statistics
- Mood distribution charts
- Most common mood tracking
- Streak visualization

#### 3. ğŸ“– **AI-Powered Journal**
- Free-form journaling with voice input
- **AI insights** on your entries
- Emotional tone detection
- Cognitive distortion identification
- Suggested CBT techniques
- Searchable history

#### 4. ğŸ‹ï¸ **CBT Exercise Library**
- **Thought Record** worksheet
- **Cognitive Distortion** checker
- **Behavioral Activation** planner
- **Gratitude Practice** prompts
- **Breathing Exercises** with timer
- Guided step-by-step instructions

#### 5. ğŸ¯ **Personalized Coping Toolkit**
- 8 pre-loaded coping strategies
- Rate effectiveness (1-5 stars)
- Track usage frequency
- Quick access during crisis
- Personalized recommendations

#### 6. ğŸ… **Achievement System**
- 8 unlockable achievements
- Streak-based rewards
- Milestone celebrations
- Progress tracking
- Gamified engagement

#### 7. ğŸ†˜ **SOS Crisis Resources**
- Quick access emergency button
- Crisis hotline numbers
- Text crisis line
- Immediate coping strategies
- Always accessible

#### 8. ğŸŒ™ **Dark Mode**
- Toggle light/dark themes
- Reduces eye strain
- Better for nighttime use
- Saves battery on OLED screens

#### 9. ğŸ“¤ **Data Export**
- Export all your data as JSON
- Includes moods, journals, achievements
- Share with therapist
- Backup your progress

#### 10. ğŸ”¥ **Streak Tracking**
- Daily mood logging streaks
- Visual streak counter
- Motivation to stay consistent
- Achievement unlocks

---

## ğŸš€ Getting Started with V2

### Quick Start

1. **Access V2:**
   - Open `index-v2.html` in your browser
   - Or navigate to `/v2` route (if deployed)

2. **Configure Settings:**
   - Go to Settings tab
   - Add your API keys (same as V1)
   - Enable/disable voice features
   - Choose dark/light mode

3. **Grant Microphone Permission:**
   - When prompted, allow microphone access
   - Required for voice input features
   - Can be disabled in settings

### Voice Features Setup

**Browser Compatibility:**
- âœ… Chrome/Edge (best support)
- âœ… Safari (iOS 14.5+)
- âš ï¸ Firefox (limited support)

**How to Use Voice:**

1. **In Chat:**
   - Click the ğŸ¤ microphone button
   - Speak your message
   - Text appears automatically
   - Click Send

2. **In Mood Tracker:**
   - Select your mood emoji
   - Click ğŸ¤ in caption field
   - Speak why you feel this way
   - Log your mood

3. **In Journal:**
   - Click ğŸ¤ in journal field
   - Dictate your thoughts
   - AI analyzes when you save

4. **AI Voice Responses:**
   - Enable in Settings
   - AI responses read aloud
   - Click ğŸ”Š on any message to replay
   - Click ğŸ”‡ to stop

---

## ğŸ“± New Views & Navigation

### 6 Main Views:

1. **ğŸ’¬ Chat** - AI CBT Coach (with analytics)
2. **ğŸ˜Š Mood** - Mood tracker with voice
3. **ğŸ“– Journal** - AI-powered journaling
4. **ğŸ‹ï¸ Exercises** - CBT exercise library
5. **ğŸ¯ Coping** - Personalized toolkit
6. **âš™ï¸ Settings** - Enhanced settings

---

## ğŸ¯ Feature Guide

### Mood Analytics

**Access:** Click "Show Analytics" in Chat view

**What You See:**
- Total mood logs
- Last 7 days count
- Last 30 days count
- Current streak
- Mood distribution chart
- Most common mood

**Use Cases:**
- Identify patterns
- Track progress
- Share with therapist
- Understand triggers

### Journal with AI Insights

**How It Works:**
1. Write or speak your journal entry
2. Click "Save Entry"
3. AI analyzes your entry
4. Get insights on:
   - Emotional tone
   - Cognitive distortions
   - Suggested techniques

**Benefits:**
- Self-awareness
- Pattern recognition
- Guided reflection
- Professional insights

### CBT Exercises

**Available Exercises:**

1. **Thought Record** (10-15 min)
   - Identify automatic thoughts
   - Challenge negative thinking
   - Develop balanced thoughts

2. **Distortion Checker** (5-10 min)
   - Learn 10 common distortions
   - Identify your patterns
   - Reframe thinking

3. **Activity Planner** (15-20 min)
   - Schedule mood-boosting activities
   - Behavioral activation
   - Combat depression

4. **Gratitude Practice** (5 min)
   - Daily gratitude journaling
   - Positive focus
   - Mood improvement

5. **Breathing Exercise** (5 min)
   - 4-7-8 technique
   - Guided timer
   - Instant calm

### Coping Toolkit

**Pre-loaded Strategies:**
- 4-7-8 Breathing
- 5-4-3-2-1 Grounding
- Progressive Muscle Relaxation
- Take a Walk
- Listen to Music
- Call a Friend
- Write in Journal
- Cold Water on Face

**How to Use:**
1. Browse strategies
2. Click "Use Now"
3. Rate effectiveness (1-5 â­)
4. Track what works for you

### Achievement System

**Achievements:**
- ğŸŒŸ First Step (1 mood)
- ğŸ”¥ Week Warrior (7-day streak)
- ğŸ’ª Monthly Master (30-day streak)
- ğŸ¯ Half Century (50 moods)
- ğŸ‘‘ Centurion (100 moods)
- ğŸ“– Journaler (1 journal)
- âœï¸ Prolific Writer (10 journals)
- ğŸ‹ï¸ Exercise Starter (1 exercise)

---

## ğŸ¨ Dark Mode

**Toggle:** Click ğŸŒ™/â˜€ï¸ in header or Settings

**Benefits:**
- Reduces eye strain
- Better for nighttime
- Saves battery (OLED)
- Personal preference

**Colors:**
- Light: Indigo â†’ Purple gradient
- Dark: Gray-900 â†’ Gray-800 gradient

---

## ğŸ“¤ Data Export

**What's Exported:**
- All mood logs
- All journal entries
- All achievements
- Coping strategies with ratings
- Export date

**Format:** JSON file

**Use Cases:**
- Backup your data
- Share with therapist
- Transfer to another device
- Data analysis

---

## ğŸ†˜ SOS Feature

**Access:** Click red "ğŸ†˜ SOS" button in header

**Resources:**
- ğŸ“ 911 (Emergency)
- ğŸ“ 988 (Suicide & Crisis Lifeline)
- ğŸ’¬ Text HOME to 741741 (Crisis Text Line)
- Quick access to breathing exercise
- Quick access to coping toolkit

**Always Available:** Accessible from any view

---

## âš™ï¸ Enhanced Settings

### New Settings:

**Voice Settings:**
- Voice Input (Enable/Disable)
- Text-to-Speech (Enable/Disable)

**Appearance:**
- Dark Mode toggle
- Theme persistence

**All Original Settings:**
- Age
- Groq API Key
- Deepseek API Key
- Gemini API Key

---

## ğŸ”§ Technical Details

### Voice Technology

**Speech Recognition:**
- Uses Web Speech API
- Browser-native (no external service)
- Works offline after initial load
- Supports continuous recognition

**Text-to-Speech:**
- Uses Web Speech Synthesis API
- Browser-native voices
- Adjustable rate, pitch, volume
- No API key required

### Data Storage

**New Collections:**
```
/artifacts/{app_id}/users/{userId}/
  â”œâ”€â”€ journal_entries/
  â”‚   â””â”€â”€ {entryId}: { content, aiInsights, timestamp }
  â”œâ”€â”€ coping_strategies/
  â”‚   â””â”€â”€ {strategyId}: { name, category, effectiveness, timesUsed }
  â””â”€â”€ user_settings/
      â””â”€â”€ achievements: { unlocked: [] }
```

### Performance

**Optimizations:**
- Lazy loading for analytics
- Efficient Firestore queries
- Memoized calculations
- Optimistic UI updates

---

## ğŸ†š V1 vs V2 Comparison

| Feature | V1 | V2 |
|---------|----|----|
| AI Chat | âœ… | âœ… |
| Mood Tracker | âœ… | âœ… |
| Settings | âœ… | âœ… |
| Voice Input | âŒ | âœ… |
| Voice Output | âŒ | âœ… |
| Analytics | âŒ | âœ… |
| Journal | âŒ | âœ… |
| CBT Exercises | âŒ | âœ… |
| Coping Toolkit | âŒ | âœ… |
| Achievements | âŒ | âœ… |
| Dark Mode | âŒ | âœ… |
| Data Export | âŒ | âœ… |
| SOS Resources | âŒ | âœ… |
| Streak Tracking | âŒ | âœ… |

---

## ğŸ“ Best Practices

### For Best Results:

1. **Daily Mood Logging**
   - Log at same time each day
   - Build a streak
   - Unlock achievements

2. **Use Voice Features**
   - Faster than typing
   - More natural expression
   - Hands-free operation

3. **Review Analytics Weekly**
   - Identify patterns
   - Track progress
   - Adjust strategies

4. **Try Different Exercises**
   - Find what works for you
   - Practice regularly
   - Build skills

5. **Rate Coping Strategies**
   - Track effectiveness
   - Personalize toolkit
   - Quick access in crisis

---

## ğŸ› Troubleshooting V2

### Voice Not Working

**Check:**
1. Microphone permission granted
2. Using supported browser (Chrome/Edge)
3. HTTPS or localhost (required for mic access)
4. Voice enabled in Settings

**Fix:**
- Reload page
- Check browser permissions
- Try different browser

### AI Insights Not Appearing

**Reason:** Requires Groq API key

**Fix:**
1. Add Groq API key in Settings
2. Save settings
3. Write new journal entry

### Achievements Not Unlocking

**Check:**
- Meet the requirement
- Data synced to Firestore
- Refresh the page

### Dark Mode Not Saving

**Fix:**
1. Click Save Settings after toggling
2. Check Firestore connection
3. Clear browser cache

---

## ğŸ“Š Usage Statistics

Track your engagement:
- Mood logs: See in analytics
- Journal entries: Count in Journal view
- Exercises completed: Track manually
- Strategies used: See in Coping view
- Current streak: Header display
- Achievements: Coping view

---

## ğŸš€ Future Enhancements (V3?)

Potential additions:
- ğŸ“ˆ Advanced charts (line graphs, trends)
- ğŸ¤ Support network features
- ğŸ“… Scheduled reminders
- ğŸµ Ambient sounds
- ğŸ“¸ Photo journaling
- ğŸŒ Multi-language support
- ğŸ“± Native mobile app
- ğŸ” End-to-end encryption

---

## ğŸ’¡ Tips & Tricks

1. **Quick Breathing:** Use SOS button for instant access
2. **Voice Journaling:** Speak naturally, edit later
3. **Streak Motivation:** Check header daily
4. **Export Regularly:** Backup your progress
5. **Dark Mode at Night:** Easier on eyes
6. **Rate Strategies:** Build personalized toolkit
7. **Review Insights:** Learn from AI analysis
8. **Try All Exercises:** Find your favorites

---

## ğŸ‰ Congratulations!

You now have access to a comprehensive mental wellness toolkit with:
- âœ… AI-powered CBT coaching
- âœ… Voice input/output
- âœ… Mood analytics
- âœ… AI journal insights
- âœ… CBT exercises
- âœ… Coping strategies
- âœ… Achievement system
- âœ… Crisis resources
- âœ… Dark mode
- âœ… Data export

**Start exploring V2 and take your mental wellness journey to the next level!** ğŸš€

---

**Need Help?** Check TROUBLESHOOTING.md or the original README.md for setup instructions.
